# [Item57] 지역 변수의 범위를 최소화 하자

---

- 지역 변수의 범위를 최소화하라 라는 말은 클래스와 멤버의 접근권한을 최소화하라 의 아이템 15와 취지가 비슷.
- 지역변수의 유효 범위를 최소로 줄이면 코드 가독성과 유지보수성이 높아지고 오류 가능성이 낮아진다.

## 지역변수의 범위를 줄이는 방법

### 1. 가장 처음 쓰일 때 선언하기

- 지역변수의 범위를 줄이는 가장 강력한 기법
- 사용하는 시점보다 훨씬 이전에 미리 선언하면 가독성이 떨어지고, 실제로 사용하는 시점엔 타입과 초기값이 헷갈릴 수 있다.
- 변수의 스코프를 고려하지 않고 마구잡이식으로 선언하면 의도한 범위의 앞이나 뒤에서 해당 변수를 사용할 떄 문제가 발생할 수 있다.

### 2. 가능한 한 지역변수는 선언과 동시에 초기화 하기

- 초기화에 필요한 정보가 충분치 않다면 충분해질때까지 선언을 미뤄야한다.

### 예외사항

- try-catch는 예외다
- 변수를 초기화 하는 표현식에서 검사 예외를 던질 가능성이 있따면 try 블록 안에서 초기화 해야한다
  (그렇지 않으면 예외가 블록을 넘어 메서드에까지 전파된다.)

    ```java
    try {
        Object object = canMakeCheckedException();
        // ...
    } catch (IOException e) {
        // ...
    }
    ```

- 변수 값을 try 블록 바깥에서도 사용해야 한다면 비록 정확히 초기화 하진 못하더라도 try 블록 앞에서 선언해야한다. (item 65)

    ```java
    Constructor<? extends Set<String>> cons = null;
    try {
        cons = cl.getDeclaredConstructor();
    } catch (NoSuchMethodException e) {
        fatalError("매개변수 없는 생성자를 찾을 수 없습니다.");
    }
    ```


### 반복문

- 반복문은 독특한 방식으로 변수 범위로 최소화 해준다
- for문이나 for-each 문을 사용한 반복문에서는 `반복 변수 (loop variable)의 범위가 반복문의 몸체, 그리고 for 키워드와 몸체 사이의 괄호 안으로 제한`된다 → 지역 변수의 범위가 줄어든다
- 반복 변수의 값을 반복문이 종료된 뒤에도 써야 하는 상황이 아니라면 while문보다는 for문을 사용하라

    ```java
    for (int i = 0, n = expensiveComputation(); i < n; i++) {
    	... // i로 무언가를 한다.
    }
    ```


### 3. 메서드를 작게 유지하고 한 가지 기능에 집중하기

- 한 메서드에서 여러 기능을 처리한다면 각 기능을 수행하는 코드가 임의의 지역변수에 접근함으로써 부수 효과가 발생할 수 있다.
- 따라서 메서드를 기능별로 쪼개서 구현할 것을 권장한다.
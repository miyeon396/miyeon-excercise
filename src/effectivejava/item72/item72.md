# [item72] 표준 예외를 사용하라

---

### 표준 예외 사용 이점

예외는 재사용하는 것이 좋음.

자바 라이브러리는 대부분 API에서 쓰기에 충분한 수의 예외를 제공

`표준 예외를 재사용`한다면 얻는 `이점`이 많음

1. 개발한 API가 다른 사람이 익히고 사용하기가 쉬워짐
2. API를 사용한 프로그램도 낯선 예외를 사용하지 않게 되어 읽기 쉽게 된다.
3. 예외 클래스 수가 적을수록 메로리 사용량도 줄고 클래스를 적재하는 시간도 적게 걸린다

**Exception, RunTimeException. Throwable, Error는 직접 재사용하지 말자.**

→이 클래스들은 추상 클래스라고 생각. 이 예외들은 다른 예외들의 상위 클래스이므로, 즉 여러 성격의 예외들을 포괄하는 클래스이므로 안정적인 테스트가 불가능하다.

### **널리 재사용되는 예외**

1. IllegalArgumentException
  - 가장 많이 재사용 되는 예외
  - 허용하지 않는 값이 인수로 건네졌을 때 (Null은 따로 NullPointerException으로 처리)
  - 호출자가 인수로 부적절한 값을 던질 때 던지는 예외이다.
2. IllegalStateException
  - 객체가 메서드를 수행하기에 적절하지 않은 상태일 때
3. NullPointerException
  - Null을 허용하지 않는 메서드에 null을 건냈을 때
4. IndexOutOfBoundsException
  - 인덱스 범위가 넘어섰을 때
5. ConcurrentModificationException
  - 단일스레드에서 사용하려고 설계한 객체를 여러 스레드가 동시에 수정하려고 할 때
  - 동시 수정을 확실히 검출할 수 있는 안정된 방법은 없어, 이 예외는 문제가 생길 가능성을 알려주는 정도의 역할로 쓰임
6. UnsupportedOperationException
  - 클라이언트가 요청한 동작을 대상 객체가 지원하지 않을 때 (호출한 메서드를 지원하지 않을 때)
  - 대부분 객체는 자신이 정의한 메서드를 모두 지원하니 흔히 쓰이는 예외는 아님
  - 보통은 구현하려는 인터페이스의 메서드 일부를 구현할 수 없을 때 사용
  - ex) 원소를 넣을 수만 있는 List 구현체에 대고 누군가 remove 메서드를 호출한다면 이 예외를 던질 것

### 애매한 상황에서 예외 선택

종종 재사용할 예외를 선택하기에 어려울 때도 있다.

<aside>
💡 카드 덱을 표현하는 객체가 있고, 인수로 건넨 수 만큼 카드를 뽑아 나눠주는 메서드를 제공한다고 해보자. 이때 덱에 남아있는 카드 수보다 큰 값을 건네면 어떤 예외를 던져야할까?

</aside>

- IllegalArgumentException : 인수의 값이 너무 크다.
- IllegalStateException : 남은 카드 수가 너무 적다.

→ 이럴 경우에는 인수 값이 무엇이었든 어차피 실패했을 거라면 IllegalStateException을, 그렇지 않으면 IllegalArgumentException을 던져라

### 정리

- 위의 언급한 것들이 가장 흔하게 재사용되는 예외들
- 그외의 복소수나 유리수 다루는 객체 작성 시 ⇒ ArithmeticExcetption이나, NumberFormatException을 재사용할 수 있을 것
- 상황에 부합한다면 항상 `표준예외를 재사용`하자.
  - 이때 API 문서를 참고해서 그 예외가 어떤 상황에서 던져지는지를 꼭 확인해야한다.
- 예외의 이름 뿐만 아니라, 예외가 던져지는 맥락도 부합할 때만 재사용한다.
- 더 많은 정보를 제공하길 원하면 표준예외를 확장해도 좋으나 예외는 직렬화 할 수 있다
  - 직렬화에는 많은 부담이 따르기 때문에 굳이 사용자 정의 예외를 만들 필요는 없음..